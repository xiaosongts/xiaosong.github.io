<!DOCTYPE html>
<html><head>
<title>IoC</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="G-XXXXXXXXXX">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:url" content="http://example.org/spring/ioc/">
  <meta property="og:site_name" content="小宋小宋?">
  <meta property="og:title" content="IoC">
  <meta property="og:description" content="控制反转和依赖注入 Bean
容器管理的对象被称为Bean 面向对象的封装特征，外部调用者无法直接操纵对象的属性，只能通过对象提供的方法去操纵 作用：对于某些场景设计方便，比如对应数据库的表、前端的数据属性、序列化存储 控制反转
简单的说：反转的是对象属性的创建者，对象的属性不由自己来创建，而是把权力交出去，由其他东西在创建对象的时候再确定自己的属性。 对象仅通过构造参数、工厂方法的参数或在对象实例被构造或从工厂方法返回后在其上设置的属性来定义其依赖关系（即它们与之合作的其他对象）。 容器在创建 bean 时注入这些依赖关系。 从根本上说是Bean本身通过使用直接构建类或诸如服务定位模式的机制来控制其依赖关系的实例化或位置的逆过程。 依赖注入
是实现控制反转的一种方法 依赖：代表的就是一个对象的属性 注入：就是在对象被创建的时候，给其属性赋值的行为 配置 在此，如果要实现依赖注入，就需要配置元数据(Metadata)，这一步的作用也就是自己指明某一个对象的属性要注入哪一个对象（有可能会多态）。
配置方法的话
xml：这大抵是最通用的方法，比如MyBatis也是这个，Servlet也是这个 注解：利用java的@interface，表明对象的属性，然后再实现一个基于包的类扫描器，再取出其注解 XML 结构
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&#34;&gt; &lt;bean id=&#34;accountDao&#34; class=&#34;org.dao.AccountDao&#34;/&gt; &lt;bean id=&#34;itemDao&#34; class=&#34;org.dao.ItemDao&#34;/&gt; &lt;bean id=&#34;petStore&#34; class=&#34;org.service.PetStoreServiceImpl&#34;&gt; &lt;property name=&#34;accountDao&#34; ref=&#34;accountDao&#34;/&gt; &lt;property name=&#34;itemDao&#34; ref=&#34;itemDao&#34;/&gt; &lt;/bean&gt; &lt;/beans&gt; 注解 组件的注解 @Component
表示一个组件，在被扫描的时候，会注册到容器中，作为一个BeanDefinition 扫描 @ComponentScan(basePackages = “com.yushan”)
当一个@Configuration类配置一个这个注解，会启动注解扫描，然后会把所有声明了@Component注解的类作为一个组件注册到容器中 xml
&lt;context:component-scan base-package=&#34;com.yushan&#34;/&gt; @Configuration 这个注解，用来声明一个类作为一个配置元数据的地方，从这里可以获得BeanDefinition，而且这个类也是一个BeanDefinition。
类级别的 表明该类是一个BeanDefinition的来源 可以处理Bean的依赖关系，而@Component不可以处理 @Bean 这个和xml配置的bean一样，用来表示一个方法来实例化配置一个新的对象，交给Spring容器管理
方法级别的，方法的返回值就是一个BeanDefinition 默认bean的id就是方法名，当然还可以使用name属性配置Bean的名字 支持初始化、销毁的回调 依赖
当方法返回值的Bean依赖于其他实例，可以在添加在方法参数里，然后会自动注入该形参类型的实例对象 解析机制和基于构造函数的DI差不多 @Configuration public class AppConfig { @Bean public A a(B b) { return new A(b); } } 注入 依赖注入的注解，所以可以和xml的bean标签结合使用">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="spring">
    <meta property="article:published_time" content="2024-05-24T15:14:02+08:00">
    <meta property="article:modified_time" content="2024-05-24T15:14:02+08:00">






  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="IoC">
  <meta name="twitter:description" content="控制反转和依赖注入 Bean
容器管理的对象被称为Bean 面向对象的封装特征，外部调用者无法直接操纵对象的属性，只能通过对象提供的方法去操纵 作用：对于某些场景设计方便，比如对应数据库的表、前端的数据属性、序列化存储 控制反转
简单的说：反转的是对象属性的创建者，对象的属性不由自己来创建，而是把权力交出去，由其他东西在创建对象的时候再确定自己的属性。 对象仅通过构造参数、工厂方法的参数或在对象实例被构造或从工厂方法返回后在其上设置的属性来定义其依赖关系（即它们与之合作的其他对象）。 容器在创建 bean 时注入这些依赖关系。 从根本上说是Bean本身通过使用直接构建类或诸如服务定位模式的机制来控制其依赖关系的实例化或位置的逆过程。 依赖注入
是实现控制反转的一种方法 依赖：代表的就是一个对象的属性 注入：就是在对象被创建的时候，给其属性赋值的行为 配置 在此，如果要实现依赖注入，就需要配置元数据(Metadata)，这一步的作用也就是自己指明某一个对象的属性要注入哪一个对象（有可能会多态）。
配置方法的话
xml：这大抵是最通用的方法，比如MyBatis也是这个，Servlet也是这个 注解：利用java的@interface，表明对象的属性，然后再实现一个基于包的类扫描器，再取出其注解 XML 结构
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd&#34;&gt; &lt;bean id=&#34;accountDao&#34; class=&#34;org.dao.AccountDao&#34;/&gt; &lt;bean id=&#34;itemDao&#34; class=&#34;org.dao.ItemDao&#34;/&gt; &lt;bean id=&#34;petStore&#34; class=&#34;org.service.PetStoreServiceImpl&#34;&gt; &lt;property name=&#34;accountDao&#34; ref=&#34;accountDao&#34;/&gt; &lt;property name=&#34;itemDao&#34; ref=&#34;itemDao&#34;/&gt; &lt;/bean&gt; &lt;/beans&gt; 注解 组件的注解 @Component
表示一个组件，在被扫描的时候，会注册到容器中，作为一个BeanDefinition 扫描 @ComponentScan(basePackages = “com.yushan”)
当一个@Configuration类配置一个这个注解，会启动注解扫描，然后会把所有声明了@Component注解的类作为一个组件注册到容器中 xml
&lt;context:component-scan base-package=&#34;com.yushan&#34;/&gt; @Configuration 这个注解，用来声明一个类作为一个配置元数据的地方，从这里可以获得BeanDefinition，而且这个类也是一个BeanDefinition。
类级别的 表明该类是一个BeanDefinition的来源 可以处理Bean的依赖关系，而@Component不可以处理 @Bean 这个和xml配置的bean一样，用来表示一个方法来实例化配置一个新的对象，交给Spring容器管理
方法级别的，方法的返回值就是一个BeanDefinition 默认bean的id就是方法名，当然还可以使用name属性配置Bean的名字 支持初始化、销毁的回调 依赖
当方法返回值的Bean依赖于其他实例，可以在添加在方法参数里，然后会自动注入该形参类型的实例对象 解析机制和基于构造函数的DI差不多 @Configuration public class AppConfig { @Bean public A a(B b) { return new A(b); } } 注入 依赖注入的注解，所以可以和xml的bean标签结合使用">







      <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-XXXXXXXXXX');
        }
      </script>




<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "abcdefghzd");
</script>



  






      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css" integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">



















</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/posts">
                    文章
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    分类
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    标签
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/database">
                    MySQL
                </a>
                
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/spring">
                    Spring
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%8e%a7%e5%88%b6%e5%8f%8d%e8%bd%ac%e5%92%8c%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" class="nav-控制反转和依赖注入">
									控制反转和依赖注入
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%85%8d%e7%bd%ae" class="nav-配置">
									配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#xml" class="nav-xml">
									XML
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e8%a7%a3" class="nav-注解">
									注解
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%bb%84%e4%bb%b6%e7%9a%84%e6%b3%a8%e8%a7%a3" class="nav-组件的注解">
									组件的注解
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%89%ab%e6%8f%8f" class="nav-扫描">
									扫描
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#configuration" class="nav-configuration">
									@Configuration
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#bean" class="nav-bean">
									@Bean
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e5%85%a5" class="nav-注入">
									注入
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%bd%9c%e7%94%a8%e5%9f%9f" class="nav-作用域">
									作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8" class="nav-使用">
									使用
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1" class="nav-创建对象">
									创建对象
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e5%85%a5%e5%b1%9e%e6%80%a7di" class="nav-注入属性di">
									注入（属性）DI
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%be%9d%e8%b5%96%e8%a7%a3%e6%9e%90%e8%bf%87%e7%a8%8b" class="nav-依赖解析过程">
									依赖解析过程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%aa%e7%8e%af%e4%be%9d%e8%b5%96" class="nav-循环依赖">
									循环依赖
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%87%aa%e5%8a%a8%e6%b3%a8%e5%85%a5-autowire" class="nav-自动注入-autowire">
									自动注入 autowire
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e5%85%a5%e9%9d%99%e6%80%81%e5%8f%98%e9%87%8f" class="nav-注入静态变量">
									注入静态变量
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bd%9c%e7%94%a8%e5%9f%9f-1" class="nav-作用域-1">
									作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8d%95%e4%be%8b%e4%bd%9c%e7%94%a8%e5%9f%9f" class="nav-单例作用域">
									单例作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8e%9f%e5%9e%8b%e4%bd%9c%e7%94%a8%e5%9f%9f" class="nav-原型作用域">
									原型作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%b1%bb%e5%9e%8b" class="nav-类型">
									类型
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4" class="nav-命名空间">
									命名空间
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" class="nav-生命周期">
									生命周期
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9d%e5%a7%8b%e5%8c%96" class="nav-初始化">
									初始化
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%94%80%e6%af%81" class="nav-销毁">
									销毁
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%90%8e%e7%bd%ae%e5%a4%84%e7%90%86%e5%99%a8" class="nav-后置处理器">
									后置处理器
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#beanpostprocessor" class="nav-beanpostprocessor">
									BeanPostProcessor
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#factorybean" class="nav-factorybean">
									FactoryBean
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#beanfactorypostprocessor" class="nav-beanfactorypostprocessor">
									BeanFactoryPostProcessor
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#aware" class="nav-aware">
									Aware
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#applicationcontextaware" class="nav-applicationcontextaware">
									ApplicationContextAware
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="http://example.org/">
            小宋小宋?
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="http://example.org/">
        <div class="single-column-header-title">小宋小宋?</div>
        
        <div class="single-column-header-subtitle">在呢！</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    IoC
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2024-05-24 15:14
                        </time>
                        

                        

                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <h2 id="控制反转和依赖注入">控制反转和依赖注入</h2>
<p><code>Bean</code></p>
<ul>
<li>容器管理的对象被称为Bean</li>
<li>面向对象的封装特征，外部调用者无法直接操纵对象的属性，只能通过对象提供的方法去操纵</li>
<li>作用：对于某些场景设计方便，比如对应数据库的表、前端的数据属性、序列化存储</li>
</ul>
<p><code>控制反转</code></p>
<ul>
<li>简单的说：反转的是对象属性的创建者，对象的属性不由自己来创建，而是把权力交出去，由其他东西在创建对象的时候再确定自己的属性。</li>
<li>对象仅通过构造参数、工厂方法的参数或在对象实例被构造或从工厂方法返回后在其上设置的属性来定义其依赖关系（即它们与之合作的其他对象）。</li>
<li>容器在创建 bean 时注入这些依赖关系。</li>
<li>从根本上说是Bean本身通过使用直接构建类或诸如服务定位模式的机制来控制其依赖关系的实例化或位置的<code>逆过程</code>。</li>
</ul>
<p><code>依赖注入</code></p>
<ul>
<li>是实现控制反转的一种方法</li>
<li>依赖：代表的就是一个对象的属性</li>
<li>注入：就是在对象被创建的时候，给其属性赋值的行为</li>
</ul>
<h2 id="配置">配置</h2>
<p>在此，如果要实现<code>依赖注入</code>，就需要配置元数据(Metadata)，这一步的作用也就是自己指明某一个对象的属性要注入哪一个对象（有可能会多态）。</p>
<p>配置方法的话</p>
<ul>
<li>xml：这大抵是最通用的方法，比如MyBatis也是这个，Servlet也是这个</li>
<li>注解：利用java的@interface，表明对象的属性，然后再实现一个基于包的类扫描器，再取出其注解</li>
</ul>
<h2 id="xml">XML</h2>
<p>结构</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">        https://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;accountDao&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.dao.AccountDao&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;itemDao&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.dao.ItemDao&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;petStore&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.service.PetStoreServiceImpl&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;accountDao&#34;</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;accountDao&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;itemDao&#34;</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;itemDao&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></div><h2 id="注解">注解</h2>
<h3 id="组件的注解">组件的注解</h3>
<p>@Component</p>
<ul>
<li>表示一个组件，在被扫描的时候，会注册到容器中，作为一个<code>BeanDefinition</code></li>
</ul>
<h3 id="扫描">扫描</h3>
<p>@ComponentScan(basePackages = &ldquo;com.yushan&rdquo;)</p>
<ul>
<li>当一个@Configuration类配置一个这个注解，会启动注解扫描，然后会把所有声明了@Component注解的类作为一个组件注册到容器中</li>
</ul>
<p>xml</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;context:component-scan</span> <span style="color:#658b00">base-package=</span><span style="color:#cd5555">&#34;com.yushan&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span></code></pre></div><h3 id="configuration">@Configuration</h3>
<p>这个注解，用来声明一个类作为一个配置元数据的地方，从这里可以获得<code>BeanDefinition</code>，而且这个类也是一个BeanDefinition。</p>
<ul>
<li>类级别的</li>
<li>表明该类是一个<code>BeanDefinition</code>的来源</li>
<li>可以处理Bean的依赖关系，而@Component不可以处理</li>
<li></li>
</ul>
<h3 id="bean">@Bean</h3>
<p>这个和xml配置的bean一样，用来表示一个<code>方法</code>来实例化配置一个新的对象，交给Spring容器管理</p>
<ul>
<li>方法级别的，方法的返回值就是一个<code>BeanDefinition</code></li>
<li>默认bean的id就是方法名，当然还可以使用<code>name</code>属性配置Bean的名字</li>
<li>支持初始化、销毁的回调</li>
</ul>
<p>依赖</p>
<ul>
<li>当方法返回值的Bean依赖于其他实例，可以在添加在方法参数里，然后会自动注入该形参类型的实例对象</li>
<li>解析机制和基于构造函数的DI差不多</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Configuration</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">AppConfig</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@Bean</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span>A<span style="color:#bbb"> </span><span style="color:#008b45">a</span>(B<span style="color:#bbb"> </span>b)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>A(b);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="注入">注入</h3>
<p>依赖注入的注解，所以可以和xml的bean标签结合使用</p>
<p>@Autowired</p>
<ol>
<li>基于<code>类型</code>的注入，也就是能够和属性类型匹配的</li>
<li>当有多个类型匹配的时候，会按照id进行匹配
<ol>
<li>如果找不到id匹配的，就会注入错误</li>
<li>但是此时如果某一个Bean声明了@Primary（在xml文件中是一个primary属性），则就注入它</li>
</ol>
</li>
</ol>
<p>@Qualifier</p>
<ul>
<li>指明注入依赖的名字</li>
</ul>
<p>@Resource</p>
<ul>
<li>通过名字注入，要提供一个name，然后进行匹配注入</li>
<li>名字不匹配，之后再通过类型注入</li>
<li>名字规则
<ul>
<li>在字段上，默认值是<code>字段名</code>。</li>
<li>在方法上，默认值是与方法对应的<code>JavaBeans属性名</code>，如setA，默认值就是a</li>
<li>在类上，没有默认值，必须指定。</li>
</ul>
</li>
</ul>
<p>@Value</p>
<ul>
<li>用于读取静态properties</li>
</ul>
<p>在Spring中，可采用：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Configuration</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#707a7c">@PropertySource</span>(<span style="color:#cd5555">&#34;classpath:application.properties&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">AppConfig</span><span style="color:#bbb"> </span>{<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">   </span><span style="color:#707a7c">@Value</span>(<span style="color:#cd5555">&#34;${java.url}&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">   </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>url;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><ul>
<li>当然，可以直接在这个AppConfig中，配置静态properties</li>
<li>当然，也可以修改占位符，详见源码</li>
<li>数据来源
<ul>
<li>Spring Boot默认配置了一个 <code>PropertySourcesPlaceholderConfigurer</code> Bean，它将从 application.properties 和 application.yml 文件中获取属性。</li>
</ul>
</li>
</ul>
<h3 id="作用域">作用域</h3>
<p>@Scope</p>
<ul>
<li>默认的Bean都是singleton单例的，要改变Bean的作用域</li>
</ul>
<h2 id="使用">使用</h2>
<p>使用<code>ApplicationContext</code>接口，再采用其实现类从各种配置元数据的地方取出信息即可。之后采用getBean()方法即可获取配置中的对象。</p>
<h2 id="创建对象">创建对象</h2>
<p>对象在容器中定义为：<code>BeanDefinition</code></p>
<p>创建对象的渠道</p>
<ul>
<li>构造器：你所托的对象符合JavaBean规范，提供一个无参的构造器就行</li>
<li>静态工厂模式：<code>factory-method</code>，指定该工厂获取对象的<code>static方法</code>；区别就是使用的是一个类的静态方法</li>
<li>实例工厂模式：<code>factory-bean</code> + <code>factory-method</code>，指定该对象通过哪个工厂和工厂哪个方法创建对象；区别就是通过一个实例对象的实例方法</li>
<li>FactoryBean接口：自定义实现<code>FactoryBean</code>接口的类，使用getBean获取该工厂时，自动实现工厂方法模式</li>
</ul>
<p>以上方法就是创建对象的渠道，但是对象的运行时类型可能确定不了，比如采用了工厂模式，创建的对象可能会有多态特性。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span> <span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span> <span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">        http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#228b22">&lt;!--第一种：直接通过构造器创建对象--&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;person&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.yushan.bean.Person&#34;</span> <span style="color:#658b00">scope=</span><span style="color:#cd5555">&#34;prototype&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#228b22">&lt;!--第二种：使用静态工厂模式，间接使用构造器--&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;personFactory&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.yushan.bean.PersonFactory&#34;</span>   <span style="color:#658b00">factory-method=</span><span style="color:#cd5555">&#34;get&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#228b22">&lt;!--第三种：使用实例方法模式，间接使用构造器--&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;personFactory2&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.yushan.bean.StudentFactory&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;person3&#34;</span> <span style="color:#658b00">factory-bean=</span><span style="color:#cd5555">&#34;personFactory2&#34;</span> <span style="color:#658b00">factory-method=</span><span style="color:#cd5555">&#34;get&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#228b22">&lt;!--第四种：使用实现FactoryBean接口，简化第三种--&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;personFactory3&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.yushan.bean.StudentFactoryBean&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span> <span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></div><p>静态工厂：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">ClientService</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>ClientService<span style="color:#bbb"> </span>clientService<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ClientService();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#008b45">ClientService</span>()<span style="color:#bbb"> </span>{}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>ClientService<span style="color:#bbb"> </span><span style="color:#008b45">createInstance</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>clientService;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>实例工厂：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">DefaultServiceLocator</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>ClientService<span style="color:#bbb"> </span>clientService<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ClientServiceImpl();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span>ClientService<span style="color:#bbb"> </span><span style="color:#008b45">createClientServiceInstance</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>clientService;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="注入属性di">注入（属性）DI</h2>
<ul>
<li>Dependency Injection</li>
</ul>
<p>目前主要就两种注入方式</p>
<ul>
<li>构造器
<ul>
<li>通过构造器进行参数解析</li>
<li>相关知识
<ul>
<li>xml标签：<code>constructor-arg</code></li>
<li>@ConstructorProperties({&ldquo;years&rdquo;, &ldquo;ultimateAnswer&rdquo;})</li>
</ul>
</li>
</ul>
</li>
<li>setter方法</li>
</ul>
<p>区别</p>
<ul>
<li>构造函数注入，可以让你将应用组件实现为不可变的对象，并确保所需的依赖不为 null。此外，构造函数注入的组件总是以<code>完全初始化</code>的状态返回给客户端（调用）代码</li>
<li>setter注入，用于在类中可以分配合理默认值的可选依赖，Setter方法使该类的对象可以在以后<code>重新配置</code>或<code>重新注入</code></li>
</ul>
<h3 id="依赖解析过程">依赖解析过程</h3>
<p>容器按如下方式执行 bean 依赖解析。</p>
<ol>
<li>ApplicationContext 是用描述所有bean的配置元数据创建和初始化的。
<ol>
<li>配置元数据可以由XML、Java代码或注解来指定。</li>
</ol>
</li>
<li>对于每个Bean来说，它的依赖是以属性、构造函数参数或静态工厂方法的参数的形式表达的。在实际创建Bean时，这些依赖被提供给Bean。</li>
<li>每个属性或构造函数参数都是要设置的值的实际定义，或对容器中另一个Bean的（引用）。</li>
<li>每个作为值的属性或构造函数参数都会从其指定格式转换为该属性或构造函数参数的实际类型。
<ol>
<li>默认情况下，Spring 可以将以字符串格式提供的值转换为所有内置类型，如 int、long、String、boolean 等等。</li>
</ol>
</li>
</ol>
<p>容器被创建时，Spring容器会验证每个Bean的配置。然而，</p>
<ol>
<li>在实际创建Bean之前，Bean的属性本身不会被设置。</li>
<li>当容器被创建时，那些具有<code>单例</code>作用域并被设置为<code>预实例化</code>的Bean（默认）被创建。作用域在 Bean Scope 配置元数据中定义。</li>
<li>否则，Bean只有在被请求时才会被创建。</li>
<li>创建 bean 有可能导致创建 bean 图（graph），因为 bean 的依赖关系和它的依赖关系（等等）被创建和分配。</li>
</ol>
<p><code>depends-on</code></p>
<ul>
<li>提前初始化</li>
<li>如一个Bean A依赖于另一个Bean B，则在配置A的属性B，指定一个depend-on，就可以在B初始化之前就提前初始化一个或多个B</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;beanOne&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ExampleBean&#34;</span> <span style="color:#658b00">depends-on=</span><span style="color:#cd5555">&#34;manager,accountDao&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;manager&#34;</span> <span style="color:#658b00">ref=</span><span style="color:#cd5555">&#34;manager&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;manager&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;ManagerBean&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;accountDao&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;x.y.jdbc.JdbcAccountDao&#34;</span> <span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span></code></pre></div><h3 id="循环依赖">循环依赖</h3>
<p>如果你使用构造函数注入，就有可能产生一个无法解决的循环依赖情况。比如说。类A通过构造函数注入需要类B的一个实例，而类B通过构造函数注入需要类A的一个实例。如果你将A类和B类的Bean配置为相互注入，Spring IoC容器会在运行时检测到这种循环引用，并抛出一个 <code>BeanCurrentlyInCreationException</code>。</p>
<p>解决方案：使用setter注入</p>
<p>与典型的情况（没有循环依赖关系）不同，Bean A和Bean B之间的循环依赖关系迫使其中一个Bean在被完全初始化之前被注入到另一个Bean中（一个典型的鸡生蛋蛋生鸡的场景）。</p>
<p>它在容器加载时检测配置问题，例如对不存在的bean的引用和循环依赖。在实际创建Bean时，Spring尽可能晚地设置属性和解析依赖关系。这意味着，当你请求一个对象时，如果在创建该对象或其某个依赖关系时出现问题，已经正确加载的Spring容器就会产生一个异常—​例如，Bean由于缺少或无效的属性而抛出一个异常。这种对某些配置问题的潜在延迟可见性是 ApplicationContext 实现默认预置单例Bean的原因。在实际需要之前创建这些Bean需要付出一些前期时间和内存的代价，当 ApplicationContext 被创建时，你会发现配置问题，而不是后来。你仍然可以覆盖这个默认行为，这样单例Bean就会懒加载地初始化，而不是急切地预实例化。</p>
<p>如果不存在循环依赖关系，当一个或多个协作（Collaborate） Bean被注入到依赖Bean中时，每个协作Bean在被注入到依赖Bean中之前被完全配置。这意味着，如果Bean A对Bean B有依赖，Spring IoC容器会在调用Bean A的setter方法之前完全配置Bean B。换句话说，Bean被实例化（如果它不是预先实例化的单例），其依赖被设置，相关的生命周期方法（如 配置的 init 方法 或 InitializingBean 回调方法）被调用。</p>
<p>注意</p>
<ol>
<li>
<p>级联属性注入，需要get方法</p>
</li>
<li>
<p>属性注入，name需要解析，所以反射的时候要获取方法名，所以name和set方法的方法名有关系</p>
<p>user-&gt;setUser</p>
<p>set方法名：set后第一个字母必须大写，不然找不到  ”Cannot resolve property“</p>
</li>
</ol>
<h3 id="自动注入-autowire">自动注入 autowire</h3>
<ul>
<li>
<p>byName&mdash;&gt;set方法注入</p>
<ul>
<li>当前bean的属性和spring容器的bean名称(id)有一样的，才会注入</li>
</ul>
</li>
<li>
<p>byType&mdash;&gt;set方法注入</p>
<ul>
<li>根据spring容器的bean中，当前bean和其中类型一样时注入</li>
<li>同一个类型多个bean不能注入</li>
</ul>
</li>
<li>
<p>constuctor&mdash;&gt;构造方法注入</p>
<ul>
<li>根据spring容器的bean中，如果存在类型匹配的则注入，并且要求这个类型符合的bean必须有<strong>无参构造器</strong></li>
</ul>
</li>
<li>
<p>当某个bean不需要参与注入：autowire-candidat=&ldquo;false&rdquo;   不参与候选</p>
</li>
</ul>
<h3 id="注入静态变量">注入静态变量</h3>
<ol>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">//1.可以在类中创建一个同类型的成员变量，采用set注入或者构造注入</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#228b22">//2.在构造方法执行之后执行InitMethod或者@PostConstruct(JSR-250注解)，给静态变量注入同类型的成员变量</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#707a7c">@Component</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">User</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@Resource</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>userName;<span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>staticUserName;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@PostConstruct</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">init</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>staticUserName=<span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">userName</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div></li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#228b22">//给每个静态变量创建一个set方法，进行注入，但是set方法不能为static方法</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#707a7c">@Component</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">User</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">static</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>userName;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">setUserName</span>(String<span style="color:#bbb"> </span>userName){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">userName</span>=userName;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div></li>
</ol>
<h2 id="作用域-1">作用域</h2>
<p>在配置元数据中，定义一个Bean，就代表着，可以通过这个定义的Bean创建许多许多实例，这也就是在Spring将这定义为<code>BeanDefinition</code>的原因；所以在配置元数据时，就可以指定该<code>BeanDefinition</code>的属性，如作用域</p>
<ul>
<li>
<p>singleton：默认   单例    在spring容器初始化时就会创建对象</p>
</li>
<li>
<p>prototype：原型   每次getBean时创建对象</p>
</li>
<li>
<p>request：一个请求内一个对象</p>
</li>
<li>
<p>session：一个会话内一个对象</p>
</li>
<li>
<p>global session：专为portlet应用</p>
</li>
<li>
<p>application：一个应用一个对象</p>
</li>
<li>
<p>websocket：一个socket一个对象</p>
</li>
<li>
<p>自定义scope：</p>
<ul>
<li>
<p>例如：spring提供了SimpleThreadScope(使用了ThreadLocal)支持每个线程内是不同的对象</p>
</li>
<li>
<p>首先<code>CustomScopeConfigurer</code>的属性增加自定义的作用域</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.beans.factory.config.CustomScopeConfigurer&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;scopes&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;map&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;entry</span> <span style="color:#658b00">key=</span><span style="color:#cd5555">&#34;myThread&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.springframework.context.support.SimpleThreadScope&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8b008b;font-weight:bold">&lt;/entry&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">&lt;/map&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;autowireDaoBean&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.yushan.dao.AutowireDao&#34;</span> <span style="color:#658b00">autowire=</span><span style="color:#cd5555">&#34;constructor&#34;</span> <span style="color:#658b00">scope=</span><span style="color:#cd5555">&#34;myThread&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span></code></pre></div></li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">testThread</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>ApplicationContext<span style="color:#bbb"> </span>applicationContext=<span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ClassPathXmlApplicationContext(<span style="color:#cd5555">&#34;spring-autowire.xml&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>AutowireDao<span style="color:#bbb"> </span>autowireDao<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>applicationContext.<span style="color:#658b00">getBean</span>(<span style="color:#cd5555">&#34;autowireDaoBean&#34;</span>,<span style="color:#bbb"> </span>AutowireDao.<span style="color:#658b00">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(autowireDao.<span style="color:#658b00">hashCode</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#228b22">//新的线程，自定义了bean的作用域，所以从spring上下文中，获取Bean对象时，不同线程是不同的对象</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Thread(<span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>Runnable()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#707a7c">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">run</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>AutowireDao<span style="color:#bbb"> </span>autowireDao=applicationContext.<span style="color:#658b00">getBean</span>(<span style="color:#cd5555">&#34;autowireDaoBean&#34;</span>,AutowireDao.<span style="color:#658b00">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>System.<span style="color:#658b00">out</span>.<span style="color:#658b00">println</span>(autowireDao.<span style="color:#658b00">hashCode</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}).<span style="color:#658b00">start</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="单例作用域">单例作用域</h3>
<p>单例，是指每个线程使用的该对象都是同一个对象；Spring容器在初始化时，会创建所有单例的Bean，但是可以采用懒加载，只有在使用的时候才创建<code>lazy-init=&quot;true&quot;</code></p>
<p>当你定义了一个<code>BeanDefinition</code>，并且它被定义为 <code>singleton</code>，Spring IoC容器就会为该<code>BeanDefinition</code>的对象创建一个确切的实例。这个单一的实例被存储在这种单体Bean的缓存中，所有后续的请求和对该命名Bean的引用都会<code>返回缓存的对象</code>。</p>
<p>注意，这个和GoF设计模式中的单例模式有点区别，在单例模式中，采用的是硬编码（各种懒汉、饿汉），在使用时，对于该类的实例仅此一份；而Spring的单例Bean，针对的是一个<code>BeanDefinition</code>，每一个Bean的定义只有一个对象实例。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;accountServiceOne&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.something.DefaultAccountService&#34;</span> <span style="color:#658b00">scope=</span><span style="color:#cd5555">&#34;singleton&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;accountServiceTwo&#34;</span> <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;com.something.DefaultAccountService&#34;</span> <span style="color:#658b00">scope=</span><span style="color:#cd5555">&#34;singleton&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span></code></pre></div><h3 id="原型作用域">原型作用域</h3>
<p>对于那些持有状态的Bean应该定义为<code>prototype作用域</code>，持有状态可以理解为非线程安全的、对于每个用户都有自己独特的属性。</p>
<ul>
<li>Spring并不管理 prototype Bean的完整生命周期。</li>
<li>容器对prototype对象进行<code>实例化</code>、<code>配置</code>和其他方面的组装，并将其<code>交给客户端</code>，而对该prototype实例没有进一步的记录。</li>
<li>生命周期上：初始化方法在所有对象上被调用（初始化方法而不考虑scope），但在prototype的情况下，配置的<code>销毁方法不会被调用</code>，客户端代码必须清理prototype的对象，并释放原prototype Bean持有的昂贵资源（可以使用Bean的后置处理器）</li>
</ul>
<h2 id="类型">类型</h2>
<ul>
<li>引用类型：ref
<ul>
<li>数组</li>
<li>list集合</li>
<li>set集合</li>
<li>map集合</li>
<li>properites</li>
</ul>
</li>
<li>基本类型：value</li>
</ul>
<h2 id="命名空间">命名空间</h2>
<ul>
<li>
<p>方便复用，简单</p>
</li>
<li>
<p>p命名空间（方便set方法注入）</p>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns:p=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/p&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>c命名空间（方便构造方法注入）</p>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns:c=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/c&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
<li>
<p>util命名空间(代码复用)</p>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h2 id="生命周期">生命周期</h2>
<p>生命周期也就是一个Bean实例在容器内创建、存活、销毁的时间段，主要学习一个Bean实例在这个时间段经历了什么，都有哪些组件来管理的</p>
<p>Spring容器保证在Bean被提供了所有的依赖关系后立即调用配置的初始化回调。因此，初始化回调是在原始Bean引用上调用的，这意味着AOP拦截器等还没有应用到Bean上。首先完全创建一个目标Bean，然后应用一个带有拦截器链的AOP代理（比如说）。如果目标Bean和代理是分开定义的，你的代码甚至可以绕过代理，与原始的目标Bean进行交互。因此，将拦截器应用于 init 方法是不一致的，因为这样做会将目标Bean的生命周期与它的代理或拦截器联系起来，当你的代码直接与原始目标Bean交互时，会留下奇怪的语义。</p>
<h2 id="初始化">初始化</h2>
<p>这个阶段是容器完成了对Bean的属性注入之后（也就是实例化Bean之后，进行注入之后），然后进行一些初始化工作，相应的知识点有：</p>
<ul>
<li><code>InitializingBean</code>接口的afterPropertiesSet()方法，实现接口就使代码和Spring耦合了</li>
<li><code>@PostConstruct</code>注解，用在Bean的一个方法上</li>
<li>在xml中的<code>init-method</code>属性，指定Bean的一个方法</li>
</ul>
<p>不同方法实现初始化的顺序：注解-&gt;接口-&gt;自定义</p>
<p>默认的初始化方法，如果你在beans顶级标签添加了<code>default-init-method</code>属性，然后你的Bean可以不指定上述三种方式，添加一个默认方法之后，Spring容器会自动调用的。</p>
<h2 id="销毁">销毁</h2>
<p>当容器关闭或者特定Bean不再需要时，Spring会调用销毁方法，相应知识点有：</p>
<ul>
<li><code>DisposableBean</code>接口，一个Bean实现接口，Spring会调用其<code>destroy方法</code></li>
<li><code>@PreDestroy</code>注解，用在Bean的一个方法上</li>
<li><code>destroy-method</code>属性，指定Bean的一个方法</li>
</ul>
<p>不同方法实现销毁的顺序：注解-&gt;接口-&gt;自定义</p>
<p>默认的销毁方法，如果你在beans顶级标签添加了<code>default-destroy-method</code>属性，然后你的Bean可以不指定上述三种方式，添加一个默认方法之后，Spring容器会自动调用的。</p>
<h2 id="后置处理器">后置处理器</h2>
<h3 id="beanpostprocessor"><code>BeanPostProcessor</code></h3>
<p>后置处理器，可以在Bean初始化之前、初始化之后这两个阶段都可以执行回调方法，就如源码一下，它可以对传过来的对象进行加工处理，比如AOP就可以采用这个后置处理器</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">BeanPostProcessor</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@Nullable</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">default</span><span style="color:#bbb"> </span>Object<span style="color:#bbb"> </span><span style="color:#008b45">postProcessBeforeInitialization</span>(Object<span style="color:#bbb"> </span>bean,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>beanName)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>BeansException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>bean;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@Nullable</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">default</span><span style="color:#bbb"> </span>Object<span style="color:#bbb"> </span><span style="color:#008b45">postProcessAfterInitialization</span>(Object<span style="color:#bbb"> </span>bean,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>beanName)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>BeansException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>bean;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="factorybean">FactoryBean</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">FactoryBean</span>&lt;T&gt;<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>String<span style="color:#bbb"> </span>OBJECT_TYPE_ATTRIBUTE<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#cd5555">&#34;factoryBeanObjectType&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>T<span style="color:#bbb"> </span><span style="color:#008b45">getObject</span>()<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Class&lt;?&gt;<span style="color:#bbb"> </span>getObjectType();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">default</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#008b45">isSingleton</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">true</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="beanfactorypostprocessor"><code>BeanFactoryPostProcessor</code></h3>
<p>这个后置处理器主要就是管理Bean的元数据，因为获得的是<code>BeanDefinition</code>，这个具体的例子就比如配置数据源是时候引入一个context命名空间。如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#1e889b">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;beans</span> <span style="color:#658b00">xmlns=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/beans&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#658b00">xmlns:xsi=</span><span style="color:#cd5555">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#658b00">xmlns:context=</span><span style="color:#cd5555">&#34;http://www.springframework.org/schema/context&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#658b00">xsi:schemaLocation=</span><span style="color:#cd5555">&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">	http://www.springframework.org/schema/beans
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">	http://www.springframework.org/schema/beans/spring-beans.xsd
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">	http://www.springframework.org/schema/context
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">	http://www.springframework.org/schema/context/spring-context.xsd
</span></span></span><span style="display:flex;"><span><span style="color:#cd5555">&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;context:property-placeholder</span> <span style="color:#658b00">location=</span><span style="color:#cd5555">&#34;classpath:com/something/jdbc.properties&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/beans&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;bean</span> <span style="color:#658b00">id=</span><span style="color:#cd5555">&#34;dataSource&#34;</span> <span style="color:#658b00">destroy-method=</span><span style="color:#cd5555">&#34;close&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#658b00">class=</span><span style="color:#cd5555">&#34;org.apache.commons.dbcp.BasicDataSource&#34;</span><span style="color:#8b008b;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;driverClassName&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;${jdbc.driverClassName}&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;url&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;${jdbc.url}&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;username&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;${jdbc.username}&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">&lt;property</span> <span style="color:#658b00">name=</span><span style="color:#cd5555">&#34;password&#34;</span> <span style="color:#658b00">value=</span><span style="color:#cd5555">&#34;${jdbc.password}&#34;</span><span style="color:#8b008b;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">&lt;/bean&gt;</span>
</span></span></code></pre></div><p>如上，是比较常用的方式，使用这个方式就可以不用修改xml文件，切换数据源了。</p>
<p>所以在这个例子里，就采用了后置处理器，来修改Bean定义的属性，<code>PropertySourcesPlaceholderConfigurer</code>就是由这个类操作的</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@FunctionalInterface</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">BeanFactoryPostProcessor</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">postProcessBeanFactory</span>(ConfigurableListableBeanFactory<span style="color:#bbb"> </span>var1)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>BeansException;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">ConfigurableListableBeanFactory</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">extends</span><span style="color:#bbb"> </span>ListableBeanFactory,<span style="color:#bbb"> </span>AutowireCapableBeanFactory,<span style="color:#bbb"> </span>ConfigurableBeanFactory<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>BeanDefinition<span style="color:#bbb"> </span><span style="color:#008b45">getBeanDefinition</span>(String<span style="color:#bbb"> </span>var1)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>NoSuchBeanDefinitionException;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Iterator&lt;String&gt;<span style="color:#bbb"> </span><span style="color:#008b45">getBeanNamesIterator</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>当然还有很多后置处理器，如重写属性的后置处理器，了解一下即可</p>
<h2 id="aware">Aware</h2>
<p>让Bean感知Spring容器的某些特定<code>组件</code>或状态，并允许在Bean的生命周期中通过实现特定的Aware接口进行自定义操作</p>
<h2 id="applicationcontextaware">ApplicationContextAware</h2>
<p><code>ApplicationContext</code>接口，是Spring的重点接口，可以看作它就是Spring容器的管理者了，通过获取一个它的对象实例（如提供一个配置元数据的地方），它可以获得所有的Bean定义信息了。</p>
<p><code>ApplicationContextAware</code>接口，该接口提供了一个功能，它可以让Bean获得Spring的<code>ApplicationContext</code>接口，就可以侧面获得Spring应用上下文的所有信息了</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">ApplicationContextAware</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">setApplicationContext</span>(ApplicationContext<span style="color:#bbb"> </span>applicationContext)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>BeansException;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>实例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#707a7c">@Component</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">class</span> <span style="color:#008b45;font-weight:bold">MappingPassConfig</span><span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">implements</span><span style="color:#bbb"> </span>InitializingBean,<span style="color:#bbb"> </span>ApplicationContextAware<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span>ApplicationContext<span style="color:#bbb"> </span>applicationContext;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">private</span><span style="color:#bbb"> </span>List&lt;String&gt;<span style="color:#bbb"> </span>urls<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">new</span><span style="color:#bbb"> </span>ArrayList&lt;&gt;();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">afterPropertiesSet</span>()<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>RequestMappingHandlerMapping<span style="color:#bbb"> </span>mapping<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>((RequestMappingHandlerMapping)<span style="color:#bbb"> </span>applicationContext.<span style="color:#658b00">getBean</span>(<span style="color:#cd5555">&#34;requestMappingHandlerMapping&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Map&lt;RequestMappingInfo,<span style="color:#bbb"> </span>HandlerMethod&gt;<span style="color:#bbb"> </span>handlerMethods<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>mapping.<span style="color:#658b00">getHandlerMethods</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">for</span><span style="color:#bbb"> </span>(RequestMappingInfo<span style="color:#bbb"> </span>mappingInfo<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>handlerMethods.<span style="color:#658b00">keySet</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>HandlerMethod<span style="color:#bbb"> </span>handler<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>handlerMethods.<span style="color:#658b00">get</span>(mappingInfo);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#228b22">//获取控制器方法</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Method<span style="color:#bbb"> </span>method<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>handler.<span style="color:#658b00">getMethod</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#228b22">//获取方法的@Pass注解</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Pass<span style="color:#bbb"> </span>annotation<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>method.<span style="color:#658b00">getAnnotation</span>(Pass.<span style="color:#658b00">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#8b008b;font-weight:bold">if</span>(!Objects.<span style="color:#658b00">isNull</span>(annotation)){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>urls.<span style="color:#658b00">addAll</span>(mappingInfo.<span style="color:#658b00">getPatternValues</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#707a7c">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#00688b;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#008b45">setApplicationContext</span>(ApplicationContext<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#8b008b;font-weight:bold">throws</span><span style="color:#bbb"> </span>BeansException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">this</span>.<span style="color:#658b00">applicationContext</span><span style="color:#bbb"> </span>=<span style="color:#bbb"> </span>context;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#8b008b;font-weight:bold">public</span><span style="color:#bbb"> </span>List&lt;String&gt;<span style="color:#bbb"> </span><span style="color:#008b45">getUrls</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#8b008b;font-weight:bold">return</span><span style="color:#bbb"> </span>urls;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div>
                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">Last modified on 2024-05-24</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/spring/spring/">
			Next<br>Spring
                </a>
                
                
                
                <a class="older-posts" href="/devframe/spring/ioc/">
			Previous<br>IoC
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                












<script src="https://giscus.app/client.js"
        data-repo="username/repo"
        data-repo-id="**************************"
        data-category="General"
        data-category-id="*********************"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="http://example.org/">
    
        <div class="nav-title">
            小宋小宋?
        </div>
        
        <div class="nav-subtitle">
            在呢！
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/posts">
                文章
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                分类
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                标签
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/database">
                MySQL
            </a>
            
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/spring">
                Spring
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%8e%a7%e5%88%b6%e5%8f%8d%e8%bd%ac%e5%92%8c%e4%be%9d%e8%b5%96%e6%b3%a8%e5%85%a5" class="nav-控制反转和依赖注入">
									控制反转和依赖注入
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%85%8d%e7%bd%ae" class="nav-配置">
									配置
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#xml" class="nav-xml">
									XML
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e8%a7%a3" class="nav-注解">
									注解
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%bb%84%e4%bb%b6%e7%9a%84%e6%b3%a8%e8%a7%a3" class="nav-组件的注解">
									组件的注解
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%89%ab%e6%8f%8f" class="nav-扫描">
									扫描
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#configuration" class="nav-configuration">
									@Configuration
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#bean" class="nav-bean">
									@Bean
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e5%85%a5" class="nav-注入">
									注入
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%bd%9c%e7%94%a8%e5%9f%9f" class="nav-作用域">
									作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8" class="nav-使用">
									使用
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9b%e5%bb%ba%e5%af%b9%e8%b1%a1" class="nav-创建对象">
									创建对象
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e5%85%a5%e5%b1%9e%e6%80%a7di" class="nav-注入属性di">
									注入（属性）DI
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%be%9d%e8%b5%96%e8%a7%a3%e6%9e%90%e8%bf%87%e7%a8%8b" class="nav-依赖解析过程">
									依赖解析过程
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%be%aa%e7%8e%af%e4%be%9d%e8%b5%96" class="nav-循环依赖">
									循环依赖
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e8%87%aa%e5%8a%a8%e6%b3%a8%e5%85%a5-autowire" class="nav-自动注入-autowire">
									自动注入 autowire
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%b3%a8%e5%85%a5%e9%9d%99%e6%80%81%e5%8f%98%e9%87%8f" class="nav-注入静态变量">
									注入静态变量
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%bd%9c%e7%94%a8%e5%9f%9f-1" class="nav-作用域-1">
									作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e5%8d%95%e4%be%8b%e4%bd%9c%e7%94%a8%e5%9f%9f" class="nav-单例作用域">
									单例作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%8e%9f%e5%9e%8b%e4%bd%9c%e7%94%a8%e5%9f%9f" class="nav-原型作用域">
									原型作用域
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e7%b1%bb%e5%9e%8b" class="nav-类型">
									类型
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4" class="nav-命名空间">
									命名空间
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" class="nav-生命周期">
									生命周期
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%88%9d%e5%a7%8b%e5%8c%96" class="nav-初始化">
									初始化
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e9%94%80%e6%af%81" class="nav-销毁">
									销毁
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e5%90%8e%e7%bd%ae%e5%a4%84%e7%90%86%e5%99%a8" class="nav-后置处理器">
									后置处理器
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#beanpostprocessor" class="nav-beanpostprocessor">
									BeanPostProcessor
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#factorybean" class="nav-factorybean">
									FactoryBean
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#beanfactorypostprocessor" class="nav-beanfactorypostprocessor">
									BeanFactoryPostProcessor
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#aware" class="nav-aware">
									Aware
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#applicationcontextaware" class="nav-applicationcontextaware">
									ApplicationContextAware
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>

<div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
